+++
title = "Spring 3 MVC pass param and respond via XML"
date = 2011-04-14T14:45:00Z
updated = 2011-04-14T14:45:53Z
blogimport = true 
[author]
	name = "Sean Wesenberg"
	uri = "https://plus.google.com/111523202047342274226"
+++

I was looking for a way to accept a basic POST / GET and return an XML (or JSON or open format) response. The gist is; I want to write the interface between my client (javascript / flex / another client) and my services (java / php / whatever you want) and be able to swap out any of these things, but not have to recode the other end. And do it using simple web protocols, not AMF where a client library or something 'more' is needed. Simple, simple, simple.<br /><br />War File:&nbsp;http://www.wookets.com/code/java/SpringXmlService.war<br /><br />Eclipse Project:&nbsp;<a href="http://www.wookets.com/code/java/SpringXmlService/">http://www.wookets.com/code/java/SpringXmlService/</a><br /><br />Sorry there is no live demo... I could stick it up on my EC2, but I figure that won't be up for more than a few months before it gets removed.<br /><br />After downloading and sending to Tomcat try:<br /><br />http://localhost:8080/SpringXmlService/login?name=joe<br /><br />http://localhost:8080/SpringXmlService/login<br /><br />References:<br /><br /><a href="http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/mvc.html">http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/mvc.html</a><br /><br /><a href="http://blog.springsource.com/2010/01/25/ajax-simplifications-in-spring-3-0/">http://blog.springsource.com/2010/01/25/ajax-simplifications-in-spring-3-0/</a><br /><br />Source dump:<br /><br /><br /><br />HelloService.java<br /><pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> package com.wookets.demo.services;  <br /> import org.springframework.beans.factory.annotation.Autowired;  <br /> import org.springframework.oxm.xstream.XStreamMarshaller;  <br /> import org.springframework.stereotype.Controller;  <br /> import org.springframework.web.bind.annotation.RequestMapping;  <br /> import org.springframework.web.bind.annotation.RequestParam;  <br /> import org.springframework.web.bind.annotation.ResponseBody;  <br /> import com.wookets.demo.dto.HelloResponse;  <br /> @Controller  <br /> public class HelloService {  <br />  @Autowired  <br />  private XStreamMarshaller objectXmlMarshaller;  <br />  @RequestMapping(value = "/login")  <br />  public @ResponseBody String handleLogin(@RequestParam(defaultValue="world") String name) {  <br />   HelloResponse response = new HelloResponse();  <br />   response.message = "Hello " + name;  <br />   return objectXmlMarshaller.getXStream().toXML(response);  <br />  }  <br /> }  <br /></code></pre><br />HelloResponse.java<br /><pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> package com.wookets.demo.dto;  <br /> import com.thoughtworks.xstream.annotations.XStreamAlias;  <br /> @XStreamAlias("response")  <br /> public class HelloResponse {  <br />  public String message;  <br /> }  <br /></code></pre><br />web.xml<br /><pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> &lt;?xml version="1.0" encoding="UTF-8"?&gt;  <br /> &lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5"&gt;  <br />  &lt;display-name&gt;SpringXmlService&lt;/display-name&gt;  <br />  &lt;servlet&gt;  <br />   &lt;servlet-name&gt;Spring MVC Dispatcher Servlet&lt;/servlet-name&gt;  <br />   &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;  <br />   &lt;init-param&gt;  <br />    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;  <br />    &lt;param-value&gt;/WEB-INF/spring-servlet.xml&lt;/param-value&gt;  <br />   &lt;/init-param&gt;  <br />   &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;  <br />  &lt;/servlet&gt;  <br />  &lt;servlet-mapping&gt;  <br />   &lt;servlet-name&gt;Spring MVC Dispatcher Servlet&lt;/servlet-name&gt;  <br />   &lt;url-pattern&gt;/&lt;/url-pattern&gt;  <br />  &lt;/servlet-mapping&gt;  <br /> &lt;/web-app&gt;  <br /></code></pre><br />spring-servlet.xml<br /><pre  style="font-family:arial;font-size:12px;border:1px dashed #CCCCCC;width:99%;height:auto;overflow:auto;background:#f0f0f0;;background-image:URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif);padding:0px;color:#000000;text-align:left;line-height:20px;"><code style="color:#000000;word-wrap:normal;"> &lt;?xml version="1.0" encoding="UTF-8"?&gt;  <br /> &lt;beans xmlns="http://www.springframework.org/schema/beans"  <br />  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"  <br />  xmlns:mvc="http://www.springframework.org/schema/mvc"  <br />  xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd  <br />           http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd  <br />           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd"&gt;  <br />  &lt;!-- Scans the classpath of this application for @Components to deploy as beans --&gt;  <br />  &lt;context:component-scan base-package="com.wookets.*" /&gt;  <br />  &lt;!-- Configures the @Controller programming model --&gt;  <br />  &lt;mvc:annotation-driven /&gt;  <br />  &lt;!-- oxm integration --&gt;  <br />  &lt;bean id="objectXmlMarshaller" class="org.springframework.oxm.xstream.XStreamMarshaller"/&gt;  <br /> &lt;/beans&gt;  <br /></code></pre>
